<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Course Price Calculator</title>
<style>
    body {
        font-family: Arial, sans-serif;
        background-color: #f4f4f9;
        margin: 0;
        padding: 20px;
        color: #333;
    }
   
    h2 {
        color: #007bff;
        text-align: center;
    }
   
    .container {
        max-width: 800px;
        margin: 0 auto;
        padding: 20px;
        background: #fff;
        border-radius: 8px;
        box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
   
    label {
        display: block;
        margin-bottom: 5px;
        font-weight: bold;
    }
   
    select, input[type="number"], input[type="text"] {
        width: calc(100% - 22px);
        padding: 10px;
        margin-bottom: 10px;
        border: 1px solid #ddd;
        border-radius: 4px;
        box-sizing: border-box;
    }
   
    .course-entry {
        margin-bottom: 15px;
        padding: 15px;
        border: 1px solid #ddd;
        border-radius: 4px;
        background: #f9f9f9;
    }
   
    button {
        background-color: #007bff;
        color: #fff;
        border: none;
        padding: 10px 15px;
        border-radius: 4px;
        cursor: pointer;
        font-size: 16px;
        margin-right: 10px;
    }
   
    button:hover {
        background-color: #0056b3;
    }
   
    #requestQuote {
        display: none;
    }
   
    #totalPrice {
        font-size: 18px;
        font-weight: bold;
        color: #28a745;
        text-align: center;
    }
   
    .course-entry button {
        background-color: #dc3545;
    }
   
    .course-entry button:hover {
        background-color: #c82333;
    }
</style>
</head>
<body>

    <img src="PRICING FRAMEWORK.png" alt="Price Diagram">
 
<div class="container">
    <h2>Course Price Calculator</h2>
 
    <div id="courseEntries">
        <!-- Starting with no pre-filled course entries -->
    </div>
 
    <button type="button" onclick="addCourseEntry()">Add More Courses</button><br><br>
 
    <label for="companyName">Company Name:</label>
    <input type="text" id="companyName" required><br><br>
 
    <label for="requestedBy">Requested by (Your Name):</label>
    <input type="text" id="requestedBy" required><br><br>
 
    <button onclick="calculatePrice()">Calculate Price</button>
 
    <p id="totalPrice"></p>
 
    <button id="requestQuote" onclick="requestQuote()">Request Formal Quote</button>
</div>
 
<script>
    const courses = {
        "Youth Development Programme": 28000,
        "Graduate Development Programme": 33000,
        "All other Internship Programmes": 38000,
        "Individual Mentoring (Online 1 Hour per month)": 12000,
        "Group Mentoring (Online Group Rate)": 45000,
        "Individual Mentoring (Face to Face - 1 Hour per month)": 17500,
        "Single Course (One user Per Course)": 1250,
        "5 Courses (Min 100 licenses)": 1500,
        "10 Courses (Min 100 licenses)": 1900,
        "15 Courses (Min 100 licenses)": 2400,
        "20 Courses (Min 100 licenses)": 2500,
        "CK Connect (Min 100 licenses)": 1250,
        "Payroll Admin Fees": 3400
    };
 
    function addCourseEntry() {
        const courseEntryContainer = document.getElementById('courseEntries');
        const entryDiv = document.createElement('div');
        entryDiv.className = 'course-entry';
        entryDiv.innerHTML = `
            <label for="course">Select Course:</label>
            <select class="course" required>
                ${Object.keys(courses).map(course => `<option value="${course}">${course}</option>`).join('')}
            </select>
            <label for="quantity">Enter Quantity:</label>
            <input type="number" class="quantity" min="1" value="1" required>
            <button type="button" onclick="removeCourseEntry(this)">Remove</button>
        `;
        courseEntryContainer.appendChild(entryDiv);
    }
 
    function removeCourseEntry(button) {
        button.parentElement.remove();
        calculatePrice(); // Recalculate the total price when an entry is removed
    }
 
    function formatNumber(number) {
        return number.toLocaleString('en-ZA'); // Format number with thousand separators
    }
 
    function calculatePrice() {
        const courseEntries = document.querySelectorAll('.course-entry');
        let totalPrice = 0;
       
        courseEntries.forEach(entry => {
            const courseSelect = entry.querySelector('.course');
            const selectedCourse = courseSelect.value;
            const quantityInput = entry.querySelector('.quantity');
            const quantity = parseInt(quantityInput.value, 10); // Parse quantity as an integer
            const coursePrice = courses[selectedCourse];
            if (!isNaN(quantity) && coursePrice) {
                totalPrice += coursePrice * quantity;
            }
        });
 
        document.getElementById('totalPrice').innerText = `Total Price: R${formatNumber(totalPrice)}`;
        document.getElementById('requestQuote').style.display = 'block';
    }
 
    function requestQuote() {
        const courseEntries = document.querySelectorAll('.course-entry');
        const companyName = document.getElementById('companyName').value;
        const requestedBy = document.getElementById('requestedBy').value;
       
        const deals = Array.from(courseEntries).map(entry => {
            const courseSelect = entry.querySelector('.course');
            const selectedCourse = courseSelect.value;
            const quantityInput = entry.querySelector('.quantity');
            const quantity = parseInt(quantityInput.value, 10);
            const coursePrice = courses[selectedCourse];
            const totalPrice = coursePrice * quantity;
           
            return {
                title: `${selectedCourse}: ${quantity} x R${coursePrice}`,
                value: totalPrice,
                currency: 'ZAR',
                status: 'open',
                org_id: companyName,
                person_id: requestedBy,
            };
        });
       
        const apiKey = 'YOUR_PIPEDRIVE_API_KEY'; // Replace with your actual Pipedrive API key
        const url = `https://api.pipedrive.com/v1/deals?api_token=${apiKey}`;
 
        const requests = deals.map(dealData =>
            fetch(url, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(dealData),
            })
        );
 
        Promise.all(requests)
            .then(responses => Promise.all(responses.map(response => response.json())))
            .then(data => {
                if (data.every(item => item.success)) {
                    alert('Deals created successfully in Pipedrive!');
                } else {
                    alert('Failed to create some deals.');
                }
            })
            .catch(error => {
                console.error('Error:', error);
                alert('An error occurred while creating the deals.');
            });
    }
</script>
 
</body>
</html>
